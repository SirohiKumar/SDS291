---
title: "Kumar: SDS 291 - In-Class Exercises"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Class 3 | February 2, 2024

### SET UP

#### load data and libraries
```{r warning=FALSE}

library(infer)
library(ggplot2)

NCbirths = read.csv("https://bit.ly/ncbirths")
head(NCbirths)

```

#### visualize data

we are looking at the relationship between the age of the mother and the weight of the baby
```{r}

plot = ggplot(data = NCbirths, mapping = aes(x = mage, y = weight)) +
  geom_point() + 
  geom_smooth(method = lm, formula = y ~ x, se = FALSE) +
  theme_bw()

plot

```

#### use randomization distribution to test

the actual slope of the distribution
```{r}

observed_slope = NCbirths %>%
  specify(weight ~ mage) %>%
  calculate(stat = "slope")

```

generate the random distribution using permutations
```{r}

set.seed(54321)

permutation_dist = NCbirths %>%
  specify(weight ~ mage) %>%                    ## variables and relationship?
  hypothesize(null = "independence") %>%        ## set the null hypothesis there's no relationship
  generate(reps = 1000, type = "permute") %>%   ## generate the random distributions
  calculate(stat = "slope")                     ## calculate the slope of each distribution
  
```

visualize the random distribution
```{r}

visualize(permutation_dist) +
  shade_p_value(obs_stat = observed_slope, direction = "both")

```

generate a p-value
```{r}

p_value = permutation_dist %>%
  get_p_value(obs_stat = observed_slope, direction = "both")

p_value

```

### EXERCISE 1

the slope of the line in figure 1 (first visualization) is the slope between the original distribution, aka `observed_slope`: 
```{r echo=FALSE}

observed_slope

```

### EXERCISE 2

Using the visualize() function displays a histogram. Ignoring any red shaded regions, what does this histogram itself represent?

this visualization shows the distribution of the slope values for the 1000 random permutations of the dataset. so it shows the number of distributions (y-axis) with a certain slope value (x-axis). 

### EXERCISE 3
What are the chances of observing a slope as extreme or more extreme as the one observed in these data, if the mother’s age and the babies birth weight are truly unrelated to one another?

given the mother's age has no impact on the weight of the baby, the chances of observing a slope as extreme as the one observed in the data is the p-value of the original data in the randomization distribution, aka `p_value`

```{r echo=FALSE}

p_value

```

### EXERCISE 4

according to this model, there is a non-significant probability that the mother's age has a correlation with the baby's weight. 

## Class 2 | January 31, 2024

### SET UP 

#### load libraries
```{r}

library(Stat2Data)
library(ggplot2)
library(broom)
library(equatiomatic)

```

#### load data
```{r}

## load data
data("BaseballTimes2017")
head(BaseballTimes2017)

```

#### generate visualization
```{r}

plot = ggplot(BaseballTimes2017, mapping = aes(x = Pitchers, 
                                               y = Time)) + 
  geom_point() +
  theme_bw() + 
  geom_smooth(method = lm, se = FALSE, formula = y ~ x)

plot

```

### EXERCISE 1

a: Fit the regression model visualized above
```{r}

baseball_model = lm(Time ~ Pitchers, BaseballTimes2017)

```
b: Print the model summary
```{r}

summary(baseball_model)

```
c: Interpret the model's slope coefficient in a sentence. 

This model indicates that for each increase in pitchers by one during a game, the duration of the game tends to last 8.017 minutes more. 

### EXERCISE 2
Use the fitted model’s equation to compute the residual error for Game #10, between the Los Angeles Angels and the Seattle Mariners, a game where 9 pitchers were used (feel free to use pen and paper when working with the equation). Finally, check your work using the `augment()` function from the `broom()` package to inspect the precise residual error.

#### estimate on your own

isolate the coefficients
```{r}

baseball_coefs = coef(baseball_model)
baseball_coefs

```

generate the estimated time
```{r}

## Game 10 time = slope * # of pitchers + error
g10_time_est = 8.017241*9 + 124.068966
g10_time_est

```

#### calculate the residual

actual time: 
```{r}

## access baseball times at row 10, column 7 (game 10, time)
g10_time = BaseballTimes2017[10, 7]
g10_time

```

calculate the residual by subtracting the estimate from the actual value: 
```{r}

g10_resid = g10_time - g10_time_est
g10_resid

```


#### check your work

calculate the residuals for all rows from the computer's model
```{r}

residuals = augment(baseball_model)

```

isolate game 10's *actual* residual
```{r echo=FALSE}

## remember that R indexes starting at 1, not 0 (fucked in the head)

## (row 10), residuals column (col 4)
residuals[10,4]

```






